{% extends 'core/base.html' %}
{% load static %}

{% block title %}Dear&Co | Home{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero-background-image"
        style="background-image: url('{{ site_config.hero_image.url }}'); opacity: {{ hero_opacity }}; filter: blur({{ site_config.hero_image_blur }}px);">
    </div>
    <div class="hero-content">
        <div class="logo-container">
            {% if site_config.logo %}
            <img src="{{ site_config.logo.url }}" alt="Dear&Co Logo" id="floating-logo">
            {% endif %}
        </div>
        <div class="hero-main-text">
            <h1>let's build<br>something<br>that matters.</h1>
            <p>[ available for all projects ]</p>
        </div>
        <div class="hero-side-text">
            <p class="rotated-text">
                Designs --- Software --- Websites --- UI/UX --- Graphics
            </p>
        </div>
        <div class="hero-contact-info">
            <p>hit us on</p>
            <div class="social-icons">
                {% if site_config.whatsapp %}
                <a href="{{ site_config.whatsapp }}"><img src="{% static 'img/whatsapp-icon-grey.svg' %}"
                        alt="WhatsApp"></a>
                {% endif %}
                {% if site_config.instagram %}
                <a href="{{ site_config.instagram }}"><img src="{% static 'img/instagram-icon-grey.svg' %}"
                        alt="Instagram"></a>
                {% endif %}
            </div>
        </div>
        <div class="hero-footer-text">
            <p>made with <span class="love">l<span class="animated-a">aaaaaaa</span>v</span></p>
        </div>
        <div class="vertical-line"></div>
    </div>
</section>

<section class="services-snapshot">
    <div class="container">
        {% for service in services %}
        <div class="service-card animate-on-scroll">
            <div class="service-icon"><i class="icon-{{ service.icon }}"></i></div>
            <h3>{{ service.title }}</h3>
            <p>{{ service.description }}</p>
            <a href="#">Read more ›</a>
        </div>
        {% empty %}
        <p>Services will be listed here soon.</p>
        {% endfor %}
    </div>
</section>

<!-- =================================================================
     START: BENTO GRID SECTION (FULLY IMPLEMENTED)
     This section renders the dynamic bento grid items.
================================================================== -->
<section class="bento-section">
    <div class="container">
        <h2 class="section-title">OUR CAPABILITIES</h2>
        <div class="bento-grid-container">
            {% for item in bento_items %}
            <a href="{{ item.link_url|default:'#' }}" target="_blank" rel="noopener"
                class="bento-item animate-on-scroll" style="grid-column: span {{ item.column_span }}; 
                          grid-row: span {{ item.row_span }};{% if item.image %} 
                          background-image: url('{{ item.image.url }}');{% endif %}">
                <div class="bento-content">
                    <h3>{{ item.title }}</h3>
                    <p>{{ item.subtitle }}</p>
                </div>
            </a>
            {% empty %}
            <p style="text-align: center; grid-column: 1 / -1;">Bento Grid items will be displayed here once configured
                in the admin panel.</p>
            {% endfor %}
        </div>
    </div>
</section>
<!-- =================================================================
     END: BENTO GRID SECTION
================================================================== -->

<section class="primary-projects">
    <h2 class="section-title">PRIMARY PROJECTS</h2>
    <div class="projects-container" id="primary-projects-container">
        {% for project in primary_projects %}
        <div class="project-card primary animate-on-scroll" data-order="{{ forloop.counter0 }}">
            <h3>{{ project.title }}</h3>
            <p>{{ project.description }}</p>
            <a href="{{ project.project_url }}" target="_blank" rel="noopener">Go →</a>
        </div>
        {% endfor %}
    </div>
    <svg id="connector-svg"></svg>
</section>

<section class="secondary-projects">
    <div class="container">
        <h2 class="section-title" style="color: #333;">SECONDARY PROJECTS</h2>
        <div class="secondary-projects-grid">
            {% for project in secondary_projects %}
            <div class="project-card secondary animate-on-scroll">
                <img src="{{ project.image.url }}" alt="{{ project.title }}">
                <div class="card-content">
                    <h4>{{ project.title }}</h4>
                    <p>{{ project.description|truncatewords:15 }}</p>
                    <a href="{{ project.project_url }}" target="_blank" rel="noopener">View Project</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="engineering-next">
    <div class="container">
        <h2>Engineering <span>what's Next</span></h2>
    </div>
</section>

<section class="stats-bar">
    <div class="container">
        <div class="stat-item animate-on-scroll">
            <h3 class="counter" data-target="120000">0</h3>
            <p>Lines of Code</p>
        </div>
        <div class="stat-item animate-on-scroll">
            <h3 class="counter" data-target="2200">0</h3>
            <p>Hours of Work</p>
        </div>
        <div class="stat-item animate-on-scroll">
            <h3 class="counter" data-target="14">0</h3>
            <p>Languages</p>
        </div>
        <div class="stat-item animate-on-scroll">
            <h3 class="counter" data-target="3">0</h3>
            <p>Countries</p>
        </div>
        <div class="stat-item animate-on-scroll">
            <h3 class="counter" data-target="50">0</h3>
            <p>APIs & Automations</p>
        </div>
        <div class="stat-item animate-on-scroll">
            <h3 class="counter" data-target="3">0</h3>
            <p>AI Apps & 1 Framework</p>
        </div>
    </div>
</section>

<section class="growth-playbook">
    <h2 class="section-title">LATEST FROM THE BLOG</h2>
    <div class="container">
        {% if featured_posts %}
        <div class="swiper-container featured-posts-slider">
            <div class="swiper-wrapper">
                {% for post in featured_posts %}
                <div class="swiper-slide">
                    <a href="{{ post.get_absolute_url }}" class="blog-card featured">
                        {% if post.header_image and post.header_image.url %}
                        <img src="{{ post.header_image.url }}" alt="{{ post.title }}">
                        {% else %}
                        <div class="default-blog-image"
                            style="height: 200px; background-color: #333; display: flex; align-items: center; justify-content: center; color: #555;">
                            No Image</div>
                        {% endif %}
                        <div class="card-content">
                            <span class="tag">{{ post.tags.first.name|default:'Featured' }}</span>
                            <h4>{{ post.title }}</h4>
                            <p>{{ post.subtitle }}</p>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
            <div class="swiper-pagination"></div>
        </div>
        {% endif %}
        <div class="recent-posts-grid">
            {% for post in recent_posts %}
            <div class="blog-card-wrapper animate-on-scroll">
                <a href="{{ post.get_absolute_url }}" class="blog-card recent">
                    <div class="card-content">
                        <span class="tag">{{ post.tags.first.name|default:'Update' }}</span>
                        <h4>{{ post.title }}</h4>
                        <p>{{ post.subtitle }}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}